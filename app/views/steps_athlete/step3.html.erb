<h1>Step 3 - Create my main subscription</h1>

<div class="progress">
  <div class="progress-bar" role="progressbar" aria-label="Basic example" style="width: 75%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
</div>

3 out of 4
<hr>

<% campaign = Campaign.new %>


<%= form_with(model: campaign) do |form| %>
  <% if campaign.errors.any? %>
    <div style="color: red">
      <h2><%= pluralize(campaign.errors.count, "error") %> prohibited this campaign from being saved:</h2>

      <ul>
        <% campaign.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

<h4>Set my monthly price </h4>

<div data-controller="subscription-value">

  <div id="radio_buttons_group" class="btn-group" role="group" aria-label="Basic radio toggle button group">
    <input type="radio" class="btn-check" name="btnradio" id="btnradio1" autocomplete="off" value="9.99" checked
      data-action="change->subscription-value#handleChange">
    <label class="btn btn-outline-primary" for="btnradio1">9.99 €</label>

    <input type="radio" class="btn-check" name="btnradio" id="btnradio2" autocomplete="off" value="19.99"
      data-action="change->subscription-value#handleChange">
    <label class="btn btn-outline-primary" for="btnradio2">19.99 €</label>

    <input type="radio" class="btn-check" name="btnradio" id="btnradio3" autocomplete="off" value="49.99"
      data-action="change->subscription-value#handleChange">
    <label class="btn btn-outline-primary" for="btnradio3">49.99 €</label>
  </div>

  <div>
    <%#= form.label :subscription, style: "display: block" %>
    <%= form.text_field :subscription, id: "subscription_field" %>
    <%= hidden_field_tag :selected_subscription, nil, id: "selected_subscription_field" %>
  </div>

</div>
<br>

  <div class= "m-0 p-0">
    <%#= form.label :content, style: "display: block" %>
    <%= form.text_area :description, placeholder: "Let your Fans know how you plan to use the money for ... ", class: "form-control createpostdesign" %>
  </div>


  <div>
    <%#= form.label :periodicity, style: "display: block" %>
    <%= form.hidden_field :periodicity, value: true %>
  </div>

  <div class= "mt-3 p-0">
    <%#= form.label :thankyounote, style: "display: block" %>
    <%= form.text_area :thankyounote, placeholder: "thanks a lot for donating !", class: "form-control createpostdesign" %>
  </div>


  <% if campaign.persisted? %>
    <%= form.hidden_field :athlete_id %>
  <% else %>
    <%= form.hidden_field :athlete_id, value: user_athlete %>
  <% end %>

    <div class="container-fluid text-end m-2 p-2"> 
        <button type="submit" class="btn btn-primary">
            <span><i class="bi bi-check"></i> Create!</span>
        </button>
        </div>

<% end %>

